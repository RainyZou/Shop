<!doctype html>
<html lang="en">
<head>
<meta charset="utf-8">
<title>jQuery UI 排序（Sortable） - 默认功能</title>
<link rel="stylesheet"
	href="//apps.bdimg.com/libs/jqueryui/1.10.4/css/jquery-ui.min.css">
<script src="//apps.bdimg.com/libs/jquery/1.10.2/jquery.min.js"></script>
<script src="//apps.bdimg.com/libs/jqueryui/1.10.4/jquery-ui.min.js"></script>

<link rel="stylesheet" href="//code.jquery.com/ui/1.10.4/themes/smoothness/jquery-ui.css">
  <script src="//code.jquery.com/jquery-1.9.1.js"></script>
  <script src="//code.jquery.com/ui/1.10.4/jquery-ui.js"></script>
  <link rel="stylesheet" href="http://jqueryui.com/resources/demos/style.css">

<link rel="stylesheet" href="jqueryui/style.css">
<style>
#sortable {
	list-style-type: none;
	margin: 0;
	padding: 0;
	width: 60%;
}

#sortable li {
	margin: 0 3px 3px 3px;
	padding: 0.4em;
	padding-left: 1.5em;
	font-size: 1.4em;
	height: 18px;
}

#sortable li span {
	position: absolute;
	margin-left: -1.3em;
}
</style>
<script>
	$(function() {
		$("#sortable")
				.sortable(
						{
							placeholder : "ui-state-highlight",
							start : function(e, f) {
								console.log("start");
							},
							stop : function(a, c) {
								var index = $("#sortable li").index($(c.item));
								var curP = c.position.left;
								var fstP = parseInt($("#sortable li").eq(
										index - 1).css("margin-left"));

								console.log(curP);
								console.log(fstP);
								if (curP > fstP + 30) {
									$(c.item).css("margin-left", fstP + 30);
								}

								if (curP < 0) {
									for (var i = 0; i < 100; i++) {
										if (fstP - 30 * i > 0 && curP < -30 * i) {
											$(c.item).css("margin-left",
													fstP - 30 * i);
										} else {
											break;
										}
									}
								}
								console.log($(c.item).css("margin-left"));
								console.log($("#sortable li").eq(index - 1)
										.css("margin-left"));
							},
							change : function(a, d) {
								console.log("change");
							},
							sort : function(e, f) {
							}
						});

	});
</script>
</head>
<body>

	<ul id="sortable">
		<li class="ui-state-default"><span
			class="ui-icon ui-icon-arrowthick-2-n-s"></span>Item 1</li>
		<li class="ui-state-default"><span
			class="ui-icon ui-icon-arrowthick-2-n-s"></span>Item 2</li>
		<li class="ui-state-default"><span
			class="ui-icon ui-icon-arrowthick-2-n-s"></span>Item 3</li>
		<li class="ui-state-default"><span
			class="ui-icon ui-icon-arrowthick-2-n-s"></span>Item 4</li>
		<li class="ui-state-default"><span
			class="ui-icon ui-icon-arrowthick-2-n-s"></span>Item 5</li>
		<li class="ui-state-default"><span
			class="ui-icon ui-icon-arrowthick-2-n-s"></span>Item 6</li>
		<li class="ui-state-default"><span
			class="ui-icon ui-icon-arrowthick-2-n-s"></span>Item 7</li>
	</ul>


</body>
</html>
